{% extends "circuits/layout.html" %}


{% block body %}

    <header class="py-5 bg-primary text-white text-center">
        <div class="container">
            <h1 class="display-4">Electrical Help Forum</h1>
            <p class="lead mb-4">Have a question about electrical engineering? Ask it here, and the community will help you solve it!</p>
            <a href="#ask-question" class="btn btn-light btn-lg">Ask a Question</a>
        </div>
    </header>

    <section id="ask-question" class="py-5">
        <div class="container">
            <h2 class="text-center mb-4">Ask a Question</h2>
            <form action="#" method="post">
                {% csrf_token %}
                <div class="form-group">
                    <label for="title">Question Title</label>
                    <input type="text" class="form-control" id="title" name="title" placeholder="Enter your question title" required>
                </div>
                <div class="form-group">
                    <label for="description">Question Description</label>
                    <textarea class="form-control" id="description" name="description" rows="5" placeholder="Describe your question in detail" required></textarea>
                </div>
                <button type="submit" class="btn btn-primary mt-3">Submit Question</button>
            </form>
        </div>
    </section>

    <section class="py-5 bg-light">
        <div class="container">
            <h2 class="text-center mb-4">Recent Questions</h2>

            {% for question in questions %}
            <div class="card mb-3">
                <div class="card-body">
                    <h5 class="card-title"><a href="#">{{ question.title }}</a></h5>
                    <p class="card-text">{{ question.description|slice:":150" }}...</p>
                    <p class="text-muted">Asked by: {{ question.author }} | {{ question.created_at }}</p>
                    <a href="{% url 'question_detail' question.id %}" class="btn btn-link">View Question</a>
                </div>
            </div>
            {% empty %}
            <p>No questions have been posted yet. Be the first to ask!</p>
            {% endfor %}

        </div>
    </section>

    <section id="question-detail" class="py-5">
        <div class="container">
            <h2 class="text-center mb-4">Question Details</h2>
            <div class="card">
                <div class="card-body">
                    <h3>{{ question.title }}</h3>
                    <p>{{ question.description }}</p>
                    <p class="text-muted">Asked by: {{ question.author }} | {{ question.created_at }}</p>
                </div>
            </div>

            <h4 class="mt-4">User Comments</h4>

            {% for comment in question.comments.all %}
            <div class="card mb-3">
                <div class="card-body">
                    <p><strong>{{ comment.author }}</strong> commented:</p>
                    <p>{{ comment.content }}</p>
                    <p class="text-muted">{{ comment.created_at }}</p>
                </div>
            </div>
            {% empty %}
            <p>No comments yet. Be the first to answer!</p>
            {% endfor %}

            <h4 class="mt-4">Add a Comment</h4>
            <form action="#" method="post">
                {% csrf_token %}
                <div class="form-group">
                    <textarea class="form-control" name="content" rows="4" placeholder="Write your comment here..." required></textarea>
                </div>
                <button type="submit" class="btn btn-primary mt-3">Submit Comment</button>
            </form>
        </div>
    </section>

{% endblock %}
